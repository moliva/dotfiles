#!/usr/bin/env bash

# current session name
session=$(tmux display-message -p '#S')

create_new_session='execute(tmux new-session -s {q} -d)+accept-or-print-query'

tmux list-sessions |
  sed -E 's/:.*$//' |         # trim sessions names only
  grep -v \"^"$session"\$\" | # remove active session
  fzf \
    --reverse \
    --tmux center,40%,40% \
    --bind "ctrl-o:$create_new_session" | # create session on ctrl-o
  xargs tmux switch-client -t             # switch to session
